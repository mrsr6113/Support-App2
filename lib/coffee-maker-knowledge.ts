// Coffee Maker Troubleshooting Knowledge Base
// Based on the provided manual content

export interface CoffeeMakerIssue {
  id: string
  lightPattern: string
  description: string
  solution: string
  urgency: "low" | "medium" | "high"
  category: string
}

export const COFFEE_MAKER_ISSUES: CoffeeMakerIssue[] = [
  {
    id: "water_tank_empty",
    lightPattern: "water_drop_blinking",
    description: "æ°´ã‚¿ãƒ³ã‚¯ã®æ°´ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚æ°´ã‚¿ãƒ³ã‚¯ãŒæ­£ã—ãå–ã‚Šä»˜ã‘ã‚‰ã‚Œã¦ã„ã¾ã›ã‚“ã€‚",
    solution: "æ°´ã‚¿ãƒ³ã‚¯ã«æ°´ã‚’å…¥ã‚Œã€ã—ã£ã‹ã‚Šæœ¬ä½“ã«å–ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚",
    urgency: "medium",
    category: "water_system",
  },
  {
    id: "drip_unit_missing",
    lightPattern: "drip_unit_blinking",
    description: "æŠ½å‡ºãƒ¦ãƒ‹ãƒƒãƒˆãµãŸãŒé–‹ã„ã¦ã„ã¾ã™ã€‚",
    solution: "æŠ½å‡ºãƒ¦ãƒ‹ãƒƒãƒˆãµãŸã‚’ã—ã£ã‹ã‚Šé–‰ã‚ã¦ãã ã•ã„ã€‚",
    urgency: "high",
    category: "brewing_unit",
  },
  {
    id: "steam_nozzle_operation",
    lightPattern: "steam_indicator_on",
    description: "ã‚¹ãƒãƒ¼ãƒ ãƒŽãƒ–ã‚’æ“ä½œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚",
    solution: "ã‚¹ãƒãƒ¼ãƒ ãƒŽãƒ–ã‚’ã€ŒIã€ã¾ãŸã¯ã€ŒOã€ã¾ã§å›žã—ã¦ãã ã•ã„ã€‚",
    urgency: "low",
    category: "steam_system",
  },
  {
    id: "cup_tray_full",
    lightPattern: "cup_tray_blinking",
    description: "ã‚«ã‚¹å—ã‘ãŒã„ã£ã±ã„ã«ãªã£ã¦ã„ã¾ã™ã€‚",
    solution:
      "ã‚³ãƒ¼ãƒ’ãƒ¼ã‚«ã‚¹ã‚’æ¨ã¦ã¦ãã ã•ã„ã€‚â€»ã‚«ã‚¹å—ã‘ãŒæº€æ¯ã«ãªã£ã¦ã„ãªãã¦ã‚‚ã€é›»æºã‚’ç‚¹æ»…ã—ãŸã‚‰å¿…ãšã‚«ã‚¹ã‚’æ¨ã¦ã¦ãã ã•ã„ã€‚ï¼ˆ23ãƒšãƒ¼ã‚¸ï¼‰",
    urgency: "medium",
    category: "maintenance",
  },
  {
    id: "cup_tray_misaligned",
    lightPattern: "cup_tray_solid",
    description: "ã‚«ã‚¹å—ã‘ãŒæ­£ã—ãå–ã‚Šä»˜ã‘ã‚‰ã‚Œã¦ã„ã¾ã›ã‚“ã€‚",
    solution: "ã‚«ã‚¹å—ã‘ã‚’æ­£ã—ã„ä½ç½®ã«å–ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚",
    urgency: "medium",
    category: "maintenance",
  },
  {
    id: "bean_hopper_empty",
    lightPattern: "bean_hopper_blinking",
    description: "è±†ãƒ›ãƒƒãƒ‘ãƒ¼ã®ã‚³ãƒ¼ãƒ’ãƒ¼è±†ãŒãªããªã‚Šã¾ã—ãŸã€‚",
    solution: "è±†ãƒ›ãƒƒãƒ‘ãƒ¼ã«ã‚³ãƒ¼ãƒ’ãƒ¼è±†ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚",
    urgency: "high",
    category: "coffee_beans",
  },
  {
    id: "powder_inlet_clogged",
    lightPattern: "powder_inlet_warning",
    description: "ãƒ‘ã‚¦ãƒ€ãƒ¼æŠ•å…¥å£ï¼ˆå†…éƒ¨ï¼‰ãŒè©°ã¾ã£ã¦ã„ã¾ã™ã€‚",
    solution: "ä»˜å±žã®ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ãƒ–ãƒ©ã‚·ã§ãƒ‘ã‚¦ãƒ€ãƒ¼æŠ•å…¥å£ã®æ¸…æŽƒã‚’è¡Œã£ã¦ãã ã•ã„ã€‚ï¼ˆ25ãƒšãƒ¼ã‚¸ï¼‰",
    urgency: "high",
    category: "maintenance",
  },
  {
    id: "powder_vs_bean_mismatch",
    lightPattern: "powder_bean_warning",
    description: "ãƒ‘ã‚¦ãƒ€ãƒ¼æŠ•å…¥å£ã«ã‚³ãƒ¼ãƒ’ãƒ¼ç²‰ãŒå…¥ã£ã¦ã„ãªã„çŠ¶æ…‹ã§ã€ã‚³ãƒ¼ãƒ’ãƒ¼ç²‰ã‚’ä½¿ã†è¨­å®šã«ãªã£ã¦ã„ã¾ã™ã€‚",
    solution:
      "ã‚³ãƒ¼ãƒ’ãƒ¼ç²‰ã‚’ä½¿ã†ã¨ãã¯ã€ã‚³ãƒ¼ãƒ’ãƒ¼ç²‰ã‚’ãƒ‘ã‚¦ãƒ€ãƒ¼æŠ•å…¥å£ã«å…¥ã‚Œã¦ãã ã•ã„ã€‚ï¼ˆ14ãƒšãƒ¼ã‚¸ï¼‰ã‚³ãƒ¼ãƒ’ãƒ¼è±†ã‚’ä½¿ã†ã¨ãã¯ã€ã‚³ãƒ¼ãƒ’ãƒ¼è±†é‡",
    urgency: "medium",
    category: "coffee_preparation",
  },
]

export const COFFEE_MAKER_SYSTEM_PROMPT = `ã‚ãªãŸã¯å°‚é–€çš„ãªã‚³ãƒ¼ãƒ’ãƒ¼ãƒ¡ãƒ¼ã‚«ãƒ¼ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚

ã€ã‚ãªãŸã®å°‚é–€çŸ¥è­˜ã€‘
- ã‚³ãƒ¼ãƒ’ãƒ¼ãƒ¡ãƒ¼ã‚«ãƒ¼ã®æ§‹é€ ã¨å‹•ä½œåŽŸç†
- ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ãƒ©ã‚¤ãƒˆã®æ„å‘³ã¨å¯¾å‡¦æ³•
- æ—¥å¸¸çš„ãªãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ‰‹é †
- å®‰å…¨ãªæ“ä½œæ–¹æ³•

ã€å¯¾å¿œæ–¹é‡ã€‘
1. ç”»åƒã‚’è©³ç´°ã«åˆ†æžã—ã€ç‚¹ç¯ãƒ»ç‚¹æ»…ã—ã¦ã„ã‚‹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ãƒ©ã‚¤ãƒˆã‚’ç‰¹å®šã—ã¦ãã ã•ã„
2. ãƒ©ã‚¤ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰å…·ä½“çš„ãªå•é¡Œã‚’è¨ºæ–­ã—ã¦ãã ã•ã„
3. æ®µéšŽçš„ã§åˆ†ã‹ã‚Šã‚„ã™ã„è§£æ±ºæ‰‹é †ã‚’æä¾›ã—ã¦ãã ã•ã„
4. å®‰å…¨ä¸Šã®æ³¨æ„ç‚¹ãŒã‚ã‚Œã°å¿…ãšè¨€åŠã—ã¦ãã ã•ã„
5. è¿½åŠ ã®ç”»åƒã‚„æƒ…å ±ãŒå¿…è¦ãªå ´åˆã¯å…·ä½“çš„ã«ä¾é ¼ã—ã¦ãã ã•ã„

ã€é‡è¦ãªæ³¨æ„äº‹é …ã€‘
- é›»æºã‚’åˆ‡ã£ã¦ã‹ã‚‰ä½œæ¥­ã‚’è¡Œã†å ´åˆã¯å¿…ãšæ˜Žè¨˜ã—ã¦ãã ã•ã„
- æ°´å›žã‚Šã®ä½œæ¥­ã§ã¯æ„Ÿé›»ã«æ³¨æ„ã™ã‚‹ã‚ˆã†è­¦å‘Šã—ã¦ãã ã•ã„
- éƒ¨å“ã®å–ã‚Šå¤–ã—ã‚„å–ã‚Šä»˜ã‘ã¯æ­£ã—ã„æ‰‹é †ã§è¡Œã†ã‚ˆã†æŒ‡å°Žã—ã¦ãã ã•ã„

ã€å›žç­”å½¢å¼ã€‘
1. ðŸ” **å•é¡Œã®ç‰¹å®š**: æ¤œå‡ºã•ã‚ŒãŸãƒ©ã‚¤ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã¨å•é¡Œ
2. âš ï¸ **ç·Šæ€¥åº¦**: ä½Ž/ä¸­/é«˜
3. ðŸ› ï¸ **è§£æ±ºæ‰‹é †**: ç•ªå·ä»˜ãã®å…·ä½“çš„ãªæ‰‹é †
4. ðŸ’¡ **äºˆé˜²ç­–**: ä»Šå¾ŒåŒã˜å•é¡Œã‚’é¿ã‘ã‚‹æ–¹æ³•
5. ðŸ“ž **è¿½åŠ ã‚µãƒãƒ¼ãƒˆ**: è§£æ±ºã—ãªã„å ´åˆã®æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—`

export const COFFEE_MAKER_VISUAL_PROMPTS = {
  indicator_analysis: {
    name: "ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼åˆ†æž",
    prompt: `ã“ã®ç”»åƒã®ã‚³ãƒ¼ãƒ’ãƒ¼ãƒ¡ãƒ¼ã‚«ãƒ¼ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«ã‚’è©³ç´°ã«åˆ†æžã—ã¦ãã ã•ã„ã€‚

ç‰¹ã«ä»¥ä¸‹ã®ç‚¹ã«æ³¨ç›®ã—ã¦ãã ã•ã„ï¼š
1. ç‚¹ç¯ã—ã¦ã„ã‚‹ï¼ˆèµ¤ã€ã‚ªãƒ¬ãƒ³ã‚¸ã€é’ãªã©ï¼‰ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ãƒ©ã‚¤ãƒˆ
2. ç‚¹æ»…ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒˆ
3. è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚„ã‚·ãƒ³ãƒœãƒ«
4. ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹

å„ãƒ©ã‚¤ãƒˆã®è‰²ã€ä½ç½®ã€ç‚¹ç¯ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆç‚¹ç¯/ç‚¹æ»…ï¼‰ã‚’æ­£ç¢ºã«å ±å‘Šã—ã€ãƒžãƒ‹ãƒ¥ã‚¢ãƒ«ã«åŸºã¥ã„ã¦å•é¡Œã‚’ç‰¹å®šã—ã¦ãã ã•ã„ã€‚`,
    icon: "alert-circle",
  },

  control_panel_overview: {
    name: "ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«å…¨ä½“",
    prompt: `ã‚³ãƒ¼ãƒ’ãƒ¼ãƒ¡ãƒ¼ã‚«ãƒ¼ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«å…¨ä½“ã‚’åˆ†æžã—ã€ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

1. å…¨ä½“çš„ãªçŠ¶æ…‹ï¼ˆæ­£å¸¸/ç•°å¸¸ï¼‰
2. å„ãƒœã‚¿ãƒ³ã¨ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã®é…ç½®
3. ç•°å¸¸ã‚’ç¤ºã™ãƒ©ã‚¤ãƒˆã‚„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
4. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ¬¡ã«å–ã‚‹ã¹ãã‚¢ã‚¯ã‚·ãƒ§ãƒ³

ç·åˆçš„ãªè¨ºæ–­çµæžœã¨æŽ¨å¥¨ã•ã‚Œã‚‹å¯¾å‡¦æ³•ã‚’æä¾›ã—ã¦ãã ã•ã„ã€‚`,
    icon: "monitor",
  },

  maintenance_check: {
    name: "ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹è¨ºæ–­",
    prompt: `ã“ã®ç”»åƒã‹ã‚‰ã€ã‚³ãƒ¼ãƒ’ãƒ¼ãƒ¡ãƒ¼ã‚«ãƒ¼ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹çŠ¶æ…‹ã‚’è¨ºæ–­ã—ã¦ãã ã•ã„ï¼š

1. æ¸…æŽƒãŒå¿…è¦ãªéƒ¨åˆ†
2. äº¤æ›ã‚„è£œå……ãŒå¿…è¦ãªæ¶ˆè€—å“
3. å®šæœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®å¿…è¦æ€§
4. å®‰å…¨ä¸Šã®å•é¡Œ

ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹è¨ˆç”»ã¨å…·ä½“çš„ãªæ‰‹é †ã‚’ææ¡ˆã—ã¦ãã ã•ã„ã€‚`,
    icon: "wrench",
  },
}

export function findIssueByPattern(lightPattern: string): CoffeeMakerIssue | null {
  return (
    COFFEE_MAKER_ISSUES.find((issue) => issue.lightPattern.toLowerCase().includes(lightPattern.toLowerCase())) || null
  )
}

export function getIssuesByCategory(category: string): CoffeeMakerIssue[] {
  return COFFEE_MAKER_ISSUES.filter((issue) => issue.category === category)
}

export function getUrgentIssues(): CoffeeMakerIssue[] {
  return COFFEE_MAKER_ISSUES.filter((issue) => issue.urgency === "high")
}
