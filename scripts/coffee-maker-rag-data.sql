-- Insert coffee maker specific RAG documents
-- Run this after the main setup script

INSERT INTO rag_documents (title, content, category, tags) VALUES 

-- Water System Issues
('水タンク関連トラブル', '水タンクの水が不足している場合、水滴マークが点滅します。
解決方法：
1. 水タンクを取り外す
2. 清潔な水を満水まで入れる
3. 水タンクを正しい位置にしっかりと取り付ける
4. 水タンクが正しく装着されているか確認する

注意：水タンクが正しく取り付けられていない場合も同じ症状が出ます。', 'coffee_maker', ARRAY['水タンク', '水不足', 'インジケーター', 'トラブルシューティング']),

-- Brewing Unit Issues  
('抽出ユニット問題', '抽出ユニットのふたが開いている場合、専用のインジケーターが点滅します。
解決方法：
1. 電源を切る
2. 抽出ユニットのふたを確認
3. ふたをしっかりと閉める
4. ロックが正しくかかっているか確認
5. 電源を入れ直す

重要：抽出ユニットが開いた状態では安全上の理由で動作しません。', 'coffee_maker', ARRAY['抽出ユニット', '安全機能', 'ふた', 'ロック']),

-- Maintenance Issues
('カス受けメンテナンス', 'カス受けが満杯になると専用ライトが点滅します。
解決方法：
1. 電源を切る
2. カス受けを慎重に取り出す
3. コーヒーカスを捨てる
4. カス受けを水で洗浄し、完全に乾燥させる
5. 正しい位置に取り付ける

注意：カス受けが満杯でなくても、センサーが反応することがあります。定期的な清掃が重要です。', 'coffee_maker', ARRAY['カス受け', 'メンテナンス', '清掃', 'センサー']),

-- Bean Hopper Issues
('豆ホッパー管理', '豆ホッパーが空になると、豆のアイコンが点滅します。
解決方法：
1. 豆ホッパーのふたを開ける
2. 新鮮なコーヒー豆を適量入れる（満杯にしない）
3. ふたをしっかり閉める
4. 豆の挽き具合設定を確認

推奨：豆は使用する分だけ入れ、長期保存は避けてください。', 'coffee_maker', ARRAY['豆ホッパー', 'コーヒー豆', '保存', '挽き具合']),

-- Steam System
('スチームシステム', 'スチーム機能使用時の注意点とトラブル対処法：
スチームノブの操作：
1. 「I」位置：スチーム開始
2. 「O」位置：スチーム停止
3. 中間位置：調整

トラブル時：
- スチームが出ない：ノブ位置確認、水タンク確認
- 異音がする：内部清掃が必要
- 温度が上がらない：加熱システム点検が必要

安全注意：スチームノズルは高温になります。', 'coffee_maker', ARRAY['スチーム', 'ミルク', '安全', '温度', 'ノズル']),

-- Cleaning and Maintenance
('定期メンテナンス手順', '定期的なメンテナンスでコーヒーメーカーの性能を維持：

日常メンテナンス：
- カス受けの清掃
- 水タンクの洗浄
- 外部の拭き取り

週次メンテナンス：
- 豆ホッパーの清掃
- スチームノズルの清掃
- 内部パーツの点検

月次メンテナンス：
- 抽出ユニットの分解清掃
- 水路の洗浄
- パウダー投入口の清掃（クリーニングブラシ使用）

年次メンテナンス：
- 専門業者による内部清掃
- 部品交換（必要に応じて）', 'coffee_maker', ARRAY['メンテナンス', '清掃', '定期点検', 'クリーニング']),

-- Error Codes and Indicators
('エラーコードとインジケーター一覧', 'コーヒーメーカーの各種インジケーターの意味：

水関連：
- 水滴マーク点滅：水不足または水タンク未装着
- 水滴マーク点灯：正常

抽出関連：
- 抽出ユニットマーク点滅：ふたが開いている
- 豆マーク点滅：豆不足

メンテナンス関連：
- カス受けマーク点滅：満杯または未装着
- 清掃マーク点滅：定期清掃時期

その他：
- 電源ランプ点滅：システムエラー
- 温度ランプ点滅：加熱中または冷却中', 'coffee_maker', ARRAY['エラーコード', 'インジケーター', '診断', 'ステータス']),

-- Safety Instructions
('安全な使用方法', 'コーヒーメーカーの安全な使用のための重要事項：

電気安全：
- 濡れた手で電源プラグを触らない
- 電源コードを引っ張らない
- 定期的にプラグの清掃を行う

熱安全：
- スチームノズルは使用後高温になる
- 抽出直後のコーヒーカップは熱い
- 内部部品は動作中に高温になる

水安全：
- 清潔な水のみ使用
- 水タンクは定期的に洗浄
- 長期間使用しない場合は水を抜く

機械安全：
- 動作中は内部に手を入れない
- 部品の取り外しは電源を切ってから
- 異音や異臭がする場合は使用を中止', 'coffee_maker', ARRAY['安全', '電気', '熱', '水', '機械', '注意事項'])

ON CONFLICT DO NOTHING;

-- Insert coffee maker specific visual analysis prompts
INSERT INTO visual_analysis_prompts (name, prompt, description, icon_name, is_active) VALUES 

('coffee_indicator_analysis', 'この画像のコーヒーメーカーのコントロールパネルを詳細に分析してください。

特に以下の点に注目してください：
1. 点灯している（赤、オレンジ、青など）インジケーターライト
2. 点滅しているライト
3. 表示されているアイコンやシンボル
4. ボタンの状態

各ライトの色、位置、点灯パターン（点灯/点滅）を正確に報告し、マニュアルに基づいて問題を特定してください。', 'コーヒーメーカーのインジケーター分析', 'alert-circle', true),

('coffee_control_panel', 'コーヒーメーカーのコントロールパネル全体を分析し、以下を確認してください：

1. 全体的な状態（正常/異常）
2. 各ボタンとインジケーターの配置
3. 異常を示すライトやメッセージ
4. ユーザーが次に取るべきアクション

総合的な診断結果と推奨される対処法を提供してください。', 'コントロールパネル全体診断', 'monitor', true),

('coffee_maintenance_check', 'この画像から、コーヒーメーカーのメンテナンス状態を診断してください：

1. 清掃が必要な部分
2. 交換や補充が必要な消耗品
3. 定期メンテナンスの必要性
4. 安全上の問題

メンテナンス計画と具体的な手順を提案してください。', 'メンテナンス診断', 'wrench', true),

('coffee_problem_solver', 'コーヒーメーカーの問題を総合的に診断し、以下の形式で回答してください：

🔍 **問題の特定**: 検出されたライトパターンと問題
⚠️ **緊急度**: 低/中/高  
🛠️ **解決手順**: 番号付きの具体的な手順
💡 **予防策**: 今後同じ問題を避ける方法
📞 **追加サポート**: 解決しない場合の次のステップ

安全上の注意点があれば必ず言及してください。', '総合問題解決', 'tool', true)

ON CONFLICT (name) DO NOTHING;

-- Insert coffee maker specific system prompt
INSERT INTO system_prompts (name, prompt, description, is_default) VALUES 
('coffee_maker_expert', 'あなたは専門的なコーヒーメーカーのトラブルシューティングアシスタントです。

【あなたの専門知識】
- コーヒーメーカーの構造と動作原理
- インジケーターライトの意味と対処法
- 日常的なメンテナンス手順
- 安全な操作方法

【対応方針】
1. 画像を詳細に分析し、点灯・点滅しているインジケーターライトを特定してください
2. ライトパターンから具体的な問題を診断してください
3. 段階的で分かりやすい解決手順を提供してください
4. 安全上の注意点があれば必ず言及してください
5. 追加の画像や情報が必要な場合は具体的に依頼してください

【重要な注意事項】
- 電源を切ってから作業を行う場合は必ず明記してください
- 水回りの作業では感電に注意するよう警告してください
- 部品の取り外しや取り付けは正しい手順で行うよう指導してください

【回答形式】
1. 🔍 **問題の特定**: 検出されたライトパターンと問題
2. ⚠️ **緊急度**: 低/中/高
3. 🛠️ **解決手順**: 番号付きの具体的な手順
4. 💡 **予防策**: 今後同じ問題を避ける方法
5. 📞 **追加サポート**: 解決しない場合の次のステップ', 'コーヒーメーカー専門トラブルシューティング', false)

ON CONFLICT (name) DO NOTHING;
